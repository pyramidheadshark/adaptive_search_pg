# üß† Adaptive Semantic Search Engine

![Python](https://img.shields.io/badge/python-3.11-blue.svg)
![FastAPI](https://img.shields.io/badge/FastAPI-0.125-009688.svg)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-16-336791.svg)
![Pgvector](https://img.shields.io/badge/Extension-pgvector-orange.svg)
![Docker](https://img.shields.io/badge/Docker-Compose-2496ED.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)

> **–ö—É—Ä—Å–æ–≤–æ–π –ø—Ä–æ–µ–∫—Ç**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–æ–π –°–£–ë–î PostgreSQL

---

### üë®‚Äçüéì –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ

* **–ê–≤—Ç–æ—Ä—ã:** –°–º–∏—Ä–Ω–æ–≤ –ù–∏–∫–∏—Ç–∞ ([@pyramidheadshark](https://github.com/pyramidheadshark)), –ö–∏—Ä–∏–ª–ª –ú–µ–ª—å–Ω–∏–∫–æ–≤ ([@Chaberis](https://github.com/Chaberis))
* **–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç:** –†–¢–£ –ú–ò–†–≠–ê, 3 –∫—É—Ä—Å
* **–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞:** –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –º–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏

---

## üìñ –°—É—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏–µ

–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ (Vector Search / Cosine Similarity) —Å—Ç–∞—Ç–∏—á–µ–Ω. –û–Ω –≤—ã–¥–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–æ–ª—å–∫–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π –±–ª–∏–∑–æ—Å—Ç–∏ —Ç–µ–∫—Å—Ç–∞. –ï—Å–ª–∏ –º–æ–¥–µ–ª—å —Å—á–∏—Ç–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–º, –æ–Ω –±—É–¥–µ—Ç –≤ —Ç–æ–ø–µ –≤—Å–µ–≥–¥–∞, –¥–∞–∂–µ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å—á–∏—Ç–∞—é—Ç –∏–Ω–∞—á–µ.

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –†–µ-—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ (Dynamic Re-ranking)**. –°–∏—Å—Ç–µ–º–∞ "—Å–ª—É—à–∞–µ—Ç" –∫–ª–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç –≤–µ—Å–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, –∏—Å–ø–æ–ª—å–∑—É—è –≥–∏–±—Ä–∏–¥–Ω—É—é —Ñ–æ—Ä–º—É–ª—É —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è.

### üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±–µ–Ω—á–º–∞—Ä–∫–æ–≤

–ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –∞–Ω–∞–ª–∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è (Linear vs Log-Decay vs Sigmoid), –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –≤ —Ö–æ–¥–µ —Å–∏–º—É–ª—è—Ü–∏–∏ –Ω–∞ –¥–∞—Ç–∞—Å–µ—Ç–µ NFCorpus.

![Benchmark Results](data/old/dashboard_img_results.png)

**–ö–ª—é—á–µ–≤–æ–π –≤—ã–≤–æ–¥:** –°—Ç—Ä–∞—Ç–µ–≥–∏—è **Log-Decay** (–õ–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–æ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ) –ø–æ–∫–∞–∑–∞–ª–∞ –Ω–∞–∏–ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –±—ã—Å—Ç—Ä—ã–π —Ä–æ—Å—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ (MRR) –±–µ–∑ —Ä–∏—Å–∫–∞ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è –∏ –Ω–∞–∫—Ä—É—Ç–∫–∏.

---

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

* **Core:** Python 3.11, FastAPI
* **Database:** PostgreSQL 16 + `pgvector`
* **ML:** `sentence-transformers` (–º–æ–¥–µ–ª—å `all-MiniLM-L6-v2`)
* **Analytics:** Pandas, Plotly
* **Infrastructure:** Docker Compose, uv

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

* Docker & Docker Compose
* –¢–æ–∫–µ–Ω HuggingFace (–¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –¥–∞—Ç–∞—Å–µ—Ç–∞)

### –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
    –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤–∞—à —Ç–æ–∫–µ–Ω:

    ```bash
    cp .env.example .env
    # –í–ø–∏—à–∏—Ç–µ HF_TOKEN=... –≤–Ω—É—Ç—Ä–∏ .env
    ```

2. **–ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:**

    ```bash
    make build
    make up
    ```

    *–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –±—É–¥–µ—Ç —Å–∫–∞—á–∞–Ω–∞ ML-–º–æ–¥–µ–ª—å.*

3. **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö (ETL):**
    –°–∫—Ä–∏–ø—Ç —Å–∫–∞—á–∞–µ—Ç –¥–∞—Ç–∞—Å–µ—Ç NFCorpus, –≤–µ–∫—Ç–æ—Ä–∏–∑—É–µ—Ç –µ–≥–æ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç –≤ Postgres.

    ```bash
    make load
    ```

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã API:**

    ```bash
    curl -X POST "http://localhost:8000/api/v1/search" \
         -H "Content-Type: application/json" \
         -d '{"query": "vitamin c benefits", "limit": 3}'
    ```

---

## üß™ –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –º–æ–¥—É–ª—å —Å–∏–º—É–ª—è—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–π —ç–º—É–ª–∏—Ä—É–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∫–ª–∏–∫–∏, —à—É–º, –æ—à–∏–±–∫–∏) –∏ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –±–µ–Ω—á–º–∞—Ä–∫ (3 —Å—Ü–µ–Ω–∞—Ä–∏—è: —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, —à—É–º, –Ω–∞—Å—ã—â–µ–Ω–∏–µ):**

    ```bash
    docker compose exec app python -m src.scripts.benchmark
    ```

2. **–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å HTML-–æ—Ç—á–µ—Ç:**

    ```bash
    docker compose exec app python -m src.scripts.visualize
    ```

3. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `data/final_advanced_dashboard_ru.html`.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

* `src/database.py` ‚Äî –°—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö (`Document`, `Interaction`) –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
* `src/search.py` ‚Äî –Ø–¥—Ä–æ –ª–æ–≥–∏–∫–∏: –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–æ—Ä–º—É–ª—ã —Ä–µ-—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è
* `src/ml.py` ‚Äî –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ML-–º–æ–¥–µ–ª–∏.
* `src/main.py` ‚Äî API —Ä–æ—É—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
* `src/scripts/` ‚Äî –°–∫—Ä–∏–ø—Ç—ã ETL –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

---

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ (–ø—Ä–æ–≤–µ—Ä–∫–∞ Feedback Loop):

```bash
make test
```
